# 📦 MalianDevs Template Backend - Informations Projet

## 🎯 Objectif du Template

Ce template backend a été créé par la communauté MalianDevs pour servir de base universelle à tout type d'application métier. Il contient toutes les fonctionnalités essentielles pré-configurées et prêtes à l'emploi.

## ✅ Ce qui est Inclus

### Authentification & Sécurité
- ✅ Système JWT complet
- ✅ Authentification à 2 facteurs (2FA)
- ✅ Gestion sécurisée des sessions
- ✅ Tracking des connexions (IP, User-Agent)
- ✅ Invalidation de sessions
- ✅ Hachage sécurisé des mots de passe (bcrypt)

### Gestion des Utilisateurs
- ✅ CRUD complet des utilisateurs
- ✅ Système de rôles hiérarchiques (Administrateur > Manager > Utilisateur)
- ✅ Système de permissions granulaires
- ✅ Activation/Désactivation de comptes
- ✅ Profils utilisateurs

### Monitoring & Audit
- ✅ Logs d'activité détaillés (ActivityLog)
- ✅ Suivi des sessions actives
- ✅ Historique des connexions
- ✅ Statistiques d'utilisation
- ✅ Dashboard de monitoring

### Configuration
- ✅ Paramètres dynamiques (Settings)
- ✅ Préférences utilisateur personnalisables
- ✅ Paramètres publics et privés
- ✅ Support multi-base de données (PostgreSQL, MySQL, SQLite)

### Exemples CRUD Complets
- ✅ **Products** : Exemple de CRUD simple
  - Model, Service, Controller, Routes
  - Pagination, filtres, recherche
  - Gestion du stock
  - Protégé par permissions

- ✅ **Orders** : Exemple de CRUD relationnel
  - Relations Order → OrderItems → Products
  - Gestion automatique du stock
  - Calcul automatique des totaux
  - Gestion des statuts
  - Transactions sécurisées

### Architecture & Code
- ✅ Architecture MVC propre et modulaire
- ✅ Séparation claire des responsabilités
- ✅ Services réutilisables
- ✅ Middlewares personnalisés
- ✅ Gestion d'erreurs centralisée
- ✅ Réponses API standardisées
- ✅ Documentation complète dans le code
- ✅ Tests Jest configurés

### Scripts Utilitaires
- ✅ Script de seed (initialisation DB)
- ✅ Création automatique d'admin
- ✅ Initialisation des rôles et permissions
- ✅ Support environnements dev/prod

## 🗂️ Structure du Projet

```
MalianDevs-Template-Backend/
│
├── 📄 app.js                    # Point d'entrée principal
├── 📄 package.json              # Dépendances et scripts
├── 📄 .env                      # Configuration (à créer)
├── 📄 README.md                 # Documentation complète
├── 📄 QUICK_START.md            # Guide démarrage rapide
│
├── 📁 config/                   # Configuration
│   ├── sequelize.js             # Configuration base de données
│   ├── jwt.js                   # Configuration JWT
│   └── multer-config.js         # Configuration upload fichiers
│
├── 📁 constants/                # Constantes du projet
│   └── auditActions.js          # Actions d'audit
│
├── 📁 controllers/              # Contrôleurs (logique HTTP)
│   ├── AuthController.js        # Authentification
│   ├── userController.js        # Gestion utilisateurs
│   ├── RoleController.js        # Gestion rôles
│   ├── PermissionController.js  # Gestion permissions
│   ├── MonitoringController.js  # Monitoring & audit
│   ├── SettingsController.js    # Paramètres
│   ├── ProductController.js     # EXEMPLE CRUD simple
│   └── OrderController.js       # EXEMPLE CRUD relationnel
│
├── 📁 models/                   # Modèles (structure données)
│   ├── User.js                  # Utilisateurs
│   ├── Role.js                  # Rôles
│   ├── Permission.js            # Permissions
│   ├── RolePermission.js        # Liaison rôles-permissions
│   ├── UserSession.js           # Sessions utilisateur
│   ├── ActivityLog.js           # Logs d'activité
│   ├── Settings.js              # Paramètres
│   ├── Product.js               # EXEMPLE CRUD simple
│   ├── Order.js                 # EXEMPLE CRUD relationnel
│   ├── OrderItem.js             # Items de commande
│   └── index.js                 # Associations
│
├── 📁 services/                 # Services (logique métier)
│   ├── AuthService.js           # Service authentification
│   ├── AuditService.js          # Service audit & logs
│   ├── NotificationService.js   # Service notifications
│   ├── ProductService.js        # EXEMPLE service CRUD
│   └── OrderService.js          # EXEMPLE service relationnel
│
├── 📁 routes/                   # Routes (endpoints API)
│   ├── AuthRoutes.js            # /api/auth
│   ├── userRoutes.js            # /api/users
│   ├── RoleRoutes.js            # /api/roles
│   ├── PermissionRoutes.js      # /api/permissions
│   ├── MonitoringRoutes.js      # /api/monitoring
│   ├── SettingsRoutes.js        # /api/settings
│   ├── ProductRoutes.js         # /api/products (EXEMPLE)
│   └── OrderRoutes.js           # /api/orders (EXEMPLE)
│
├── 📁 middlewares/              # Middlewares
│   ├── auth.js                  # Authentification JWT
│   ├── authorize.js             # Autorisation permissions
│   ├── audit.js                 # Audit des activités
│   ├── sessionCheck.js          # Vérification sessions
│   ├── cors.js                  # Configuration CORS
│   └── responseSanitizer.js     # Nettoyage réponses
│
├── 📁 utils/                    # Utilitaires
│   ├── errorHandler.js          # Gestion erreurs
│   ├── responseHandler.js       # Standardisation réponses
│   ├── jwt.js                   # Utilitaires JWT
│   ├── dataSanitizer.js         # Nettoyage données
│   └── permissionsInit.js       # Init rôles/permissions
│
├── 📁 scripts/                  # Scripts utilitaires
│   ├── seed.js                  # Peuplement DB
│   └── checkAdminPermissions.js # Vérification permissions
│
├── 📁 tests/                    # Tests
│   ├── auth.test.js
│   ├── permissions.test.js
│   └── setup.js
│
└── 📁 uploads/                  # Fichiers uploadés

```

## 🚀 Démarrage Rapide

```bash
# 1. Installer les dépendances
npm install

# 2. Créer le fichier .env (voir .env.example)

# 3. Initialiser la base de données
npm run seed

# 4. Démarrer le serveur
npm run dev
```

**Identifiants par défaut :**
- Username: `admin`
- Password: `Admin123!`

## 📊 Permissions Disponibles

### Administratives
- ADMIN - Accès administrateur complet
- USERS_ADMIN - Gestion des utilisateurs
- ROLES_MANAGE - Gestion des rôles
- PERMISSIONS_MANAGE - Gestion des permissions

### Visualisation
- USERS_VIEW - Voir les utilisateurs
- ROLES_VIEW - Voir les rôles
- PERMISSIONS_VIEW - Voir les permissions
- MONITORING_VIEW - Accès au monitoring

### Contenu
- CONTENT_VIEW - Voir le contenu
- CONTENT_MANAGE - Gérer le contenu
- REPORTS_VIEW - Voir les rapports
- SETTINGS_MANAGE - Gérer les paramètres

### Produits (Exemple)
- PRODUCTS_VIEW - Voir les produits
- PRODUCTS_CREATE - Créer des produits
- PRODUCTS_UPDATE - Modifier des produits
- PRODUCTS_DELETE - Supprimer des produits

### Commandes (Exemple)
- ORDERS_VIEW - Voir les commandes
- ORDERS_CREATE - Créer des commandes
- ORDERS_UPDATE - Modifier des commandes
- ORDERS_DELETE - Supprimer des commandes

## 🎯 Utilisation pour Nouveaux Projets

### Personnaliser pour Votre Projet

1. **Renommer le projet**
   - Modifier `name` dans `package.json`
   - Mettre à jour `README.md`

2. **Adapter les rôles**
   - Modifier `utils/permissionsInit.js`
   - Ajouter/supprimer des rôles selon vos besoins

3. **Créer vos entités**
   - Utiliser Products/Orders comme modèles
   - Suivre le pattern Model → Service → Controller → Routes

4. **Adapter la configuration**
   - Configurer `.env` selon votre environnement
   - Ajuster les paramètres JWT, CORS, etc.

### Exemples d'Applications Possibles

- 🍽️ Gestion de restaurant
- 🎮 Gaming center
- 🏫 Gestion d'école
- 🏬 E-commerce
- 📚 Bibliothèque
- 🏥 Clinique médicale
- 🏋️ Salle de sport
- 🏨 Gestion d'hôtel
- Et bien plus...

## 🛠️ Technologies Utilisées

- **Node.js** : Runtime JavaScript
- **Express.js** : Framework web
- **Sequelize** : ORM pour base de données
- **JWT** : Authentification par tokens
- **Bcrypt** : Hachage des mots de passe
- **Speakeasy** : Génération codes 2FA
- **Jest** : Tests unitaires
- **Morgan** : Logs HTTP
- **Multer** : Upload de fichiers

## 📝 Notes Importantes

- ⚠️ Changez **TOUJOURS** le `JWT_SECRET` en production
- ⚠️ Changez le mot de passe admin après le premier déploiement
- ⚠️ Utilisez HTTPS en production
- ⚠️ Configurez correctement CORS selon votre frontend
- ⚠️ Activez les variables d'environnement appropriées pour la production

## 🤝 Contribution

Ce projet est maintenu par la communauté **MalianDevs**.

Pour contribuer :
1. Fork le projet
2. Créez une branche feature
3. Committez vos changements
4. Ouvrez une Pull Request

## 📜 Licence

ISC License - Libre d'utilisation

---

**Développé avec ❤️ par la communauté MalianDevs**

Pour toute question ou support, consultez la documentation complète dans `README.md` ou `QUICK_START.md`.
